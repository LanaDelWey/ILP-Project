<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Profile — TATA FRIENDS</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <aside class="brand">
      <img src="tata-friends-logo.png" alt="TATA FRIENDS" class="brand__logo">
      <h1 class="brand__title">Create Profile</h1>
      <p class="brand__subtitle">Complete the information to create your corporate account.</p>
      <div class="brand__accent" aria-hidden="true"></div>
    </aside>

    <section class="form-card" aria-labelledby="form-title">
      <h2 id="form-title" class="form-card__title">User Information</h2>

      <form id="profileForm" class="profile-form" novalidate>

        <!-- Profile Photo -->
        <div class="field field--photo">
          <label for="photo" class="photo-label">Profile Picture</label>
          <div class="photo-preview" title="Preview">
            <img id="previewImg" src="assets/avatar-placeholder.png" alt="Profile picture preview" />
            <button type="button" id="removePhoto" class="btn ghost small" aria-label="Remove photo">✕</button>
          </div>
          <input type="file" id="photo" accept="image/*" class="file-input" />
          <small class="hint">PNG or JPG. Recommended size: 400×400px.</small>
        </div>

        <!-- First Name -->
        <div class="field">
          <label for="firstName">First Name</label>
          <input id="firstName" type="text" placeholder="e.g. Ana María" required />
        </div>

        <!-- Last Name -->
        <div class="field">
          <label for="lastName">Last Name</label>
          <input id="lastName" type="text" placeholder="e.g. Pérez López" required />
        </div>

        <!-- Corporate Email -->
        <div class="field">
          <label for="email">Corporate Email</label>
          <input id="email" type="email" placeholder="yourEmployee.ID@tcs.com" required />
          <small class="hint">Use your corporate email address.</small>
        </div>

        <!-- Hobbies -->
        <div class="field">
          <label for="hobbies">Hobbies (comma separated)</label>
          <input id="hobbies" type="text" placeholder="Reading, football, photography" />
        </div>

        <!-- Work Location -->
        <div class="field">
          <label for="location">Work Location / Department</label>
          <input id="location" type="text" placeholder="e.g. Tata 4" />
        </div>

        <!-- Actions -->
        <div class="actions">
          <button type="submit" class="btn primary">Create Profile</button>
          <button type="button" class="btn ghost" id="cancelBtn">Cancel</button>
        </div>

        <p class="disclaimer">
          By creating your profile, you agree to the company’s internal privacy policy.
        </p>
      </form>
    </section>
  </main>

  <script>
    const form = document.getElementById('profileForm');

    const firstNameInput = document.getElementById('firstName');
    const lastNameInput = document.getElementById('lastName');
    const emailInput = document.getElementById('email');
    const hobbiesInput = document.getElementById('hobbies');
    const locationInput = document.getElementById('location');

    const photoInput = document.getElementById('photo');
    const previewImg = document.getElementById('previewImg');
    const removePhotoBtn = document.getElementById('removePhoto');
    const defaultSrc = previewImg.getAttribute('src');

    /* Load saved data */
    window.addEventListener('DOMContentLoaded', () => {
      const savedProfile = localStorage.getItem('profileData');
      const savedPhoto = localStorage.getItem('profilePhoto');

      if (savedProfile) {
        const data = JSON.parse(savedProfile);
        firstNameInput.value = data.firstName || '';
        lastNameInput.value = data.lastName || '';
        emailInput.value = data.email || '';
        hobbiesInput.value = data.hobbies || '';
        locationInput.value = data.location || '';
      }

      if (savedPhoto) {
        previewImg.src = savedPhoto;
      }
    });

    /* Image preview + save */
    photoInput.addEventListener('change', () => {
      const file = photoInput.files[0];
      if (!file || !file.type.startsWith('image/')) return;

      const reader = new FileReader();
      reader.onload = () => {
        previewImg.src = reader.result;
        localStorage.setItem('profilePhoto', reader.result);
      };
      reader.readAsDataURL(file);
    });

    removePhotoBtn.addEventListener('click', () => {
      previewImg.src = defaultSrc;
      photoInput.value = '';
      localStorage.removeItem('profilePhoto');
    });

    /* Submit + save data */
    form.addEventListener('submit', (e) => {
      e.preventDefault();

      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const profileData = {
        firstName: firstNameInput.value.trim(),
        lastName: lastNameInput.value.trim(),
        email: emailInput.value.trim(),
        hobbies: hobbiesInput.value.trim(),
        location: locationInput.value.trim()
      };

      localStorage.setItem('profileData', JSON.stringify(profileData));
      alert('Profile saved successfully!');
    });

    /* Cancel */
    document.getElementById('cancelBtn').addEventListener('click', () => {
      if (confirm('Do you want to cancel profile creation? All data will be cleared.')) {
        form.reset();
        previewImg.src = defaultSrc;
        localStorage.clear();
      }
    });
  </script>
</body>
</html>
